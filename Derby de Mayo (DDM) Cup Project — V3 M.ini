# Derby de Mayo (DDM) Cup Project â€” V3 Master Specification

## Project Overview

A wireless LED display system for horse racing betting entertainment at an annual Kentucky Derby / Cinco de Mayo party. The system features 20 illuminated cup bases on a fireplace mantle, controlled via a Raspberry Pi 5 touchscreen interface, with LED animations synchronized to race events.

**Event Context:** Guests buy $1 tickets, write their name, and place them in cups numbered 1-20 (one per horse). After the race, winners are drawn from the Win/Place/Show cups. Winnings split 70/20/10.

---

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RASPBERRY PI 5 (Master)                      â”‚
â”‚                    + 10" Touchscreen                            â”‚
â”‚                    Flask Web Interface                          â”‚
â”‚                    Sends commands via WiFi                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ WiFi (Socket)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ESP32 WROOM-32 (LED Controller)              â”‚
â”‚                    WiFi enabled                                 â”‚
â”‚                    Receives commands                            â”‚
â”‚                    Drives WS2812B LEDs via FastLED              â”‚
â”‚                    OLED status display                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚ Data Line (3.3V â†’ 5V level shifted)
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              20 CUP BASES (Daisy-chained)                       â”‚
â”‚              Cut WS2812B strip segments in groove               â”‚
â”‚              32 LEDs per base = 640 total LEDs                  â”‚
â”‚              Mounted on 112" mantle (~5.9" spacing)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Hardware Components

### Master Controller
| Component | Specification |
|-----------|---------------|
| Board | Raspberry Pi 5 (2GB RAM is sufficient) |
| Display | 10" Touchscreen |
| OS | Raspberry Pi OS (64-bit) |
| Software | Python 3, Flask, Socket client |

### LED Controller
| Component | Specification |
|-----------|---------------|
| Board | ESP32 WROOM-32 DevKit V1 |
| Firmware | Arduino / C++ with FastLED |
| Status Display | 0.96" or 1.3" I2C OLED (SSD1306) |
| Level Shifter | 74AHCT125 or SN74HCT245 (3.3V â†’ 5V) recommended |

### LED Display
| Component | Specification |
|-----------|---------------|
| LED Type | WS2812B Strip (cut segments, 144 LED/m) |
| LEDs per Cup | 32 |
| Total Cups | 20 |
| Total LEDs | 640 |
| Strip Density | 144 LEDs/meter |
| Voltage | 5V DC |

### Power Calculations
| Metric | Value |
|--------|-------|
| Max current per LED | 60mA (full white) |
| Theoretical max (640 LEDs) | 38.4A |
| Realistic peak (chaos mode) | 25-30A |
| Typical animated use | 15-20A |
| Recommended PSU | 5V 60A (with headroom) |

### Power System
| Component | Specification |
|-----------|---------------|
| Power Supply | Mean Well LRS-350-5 (5V 60A 300W) |
| Distribution | 6-channel fused DC distribution board |
| Main Wiring | 14-16 AWG for power trunk |
| Injection Points | 3 minimum (Cup 1, Cup 10-11, Cup 20) |
| Cup-to-Cup Power | From distribution board drops |

### Connectors
| Connection | Connector Type |
|------------|----------------|
| Power (main to dist board) | Screw terminals |
| Power (dist board to cups) | JST-VH or similar (differentiated from data) |
| Data + Ground (cup-to-cup) | JST-SM 2-pin (twisted pair) |

---

## Physical Layout

### Mantle Arrangement
- **Mantle Length:** 112"
- **Number of Cups:** 20
- **Cup Diameter:** ~3.5" (cups sit on 4" diameter bases)
- **Center-to-Center Spacing:** ~5.9"

### Cup Base Design
- 3D printed base (~4" diameter)
- Groove channel for WS2812B strip segment (32 LEDs)
- Groove follows ~90% of circumference (leaves room for wiring entry)
- Clear/translucent filament for light diffusion
- Recessed JST connectors on back for power and data

---

## Wiring Design

### Power Distribution
```
[Mean Well LRS-350-5 (5V 60A)]
        â”‚
        â–¼
[6-Channel Fused Distribution Board]
        â”‚
        â”œâ”€â”€ Fuse 1 â†’ Cups 1-4 (128 LEDs) + Injection Point 1
        â”œâ”€â”€ Fuse 2 â†’ Cups 5-8 (128 LEDs)
        â”œâ”€â”€ Fuse 3 â†’ Cups 9-12 (128 LEDs) + Injection Point 2
        â”œâ”€â”€ Fuse 4 â†’ Cups 13-16 (128 LEDs)
        â”œâ”€â”€ Fuse 5 â†’ Cups 17-20 (128 LEDs) + Injection Point 3
        â””â”€â”€ Fuse 6 â†’ ESP32 + OLED
```

### Data Line (Single Daisy Chain)
```
[Pico 2 W GPIO] â†’ [Level Shifter] â†’ [Cup 1] â†’ [Cup 2] â†’ ... â†’ [Cup 20]
```

Each cup base has:
- **Power connector:** JST-VH 2-pin (5V + GND from distribution board)
- **Data In:** JST-SM 2-pin (Data + GND from previous cup)
- **Data Out:** JST-SM 2-pin (Data + GND to next cup)

### Data + Ground Wiring
- Twist Data and GND wires together (3-4 turns per inch)
- Both power GND and data GND connect to LED strip GND pad
- This ensures solid signal reference at each cup

### ESP32 Pinout
| Pin | Function | Connection |
|-----|----------|------------|
| VIN | 5V Power In | From fused distribution (Fuse 6) |
| GND | Ground | Common ground bus |
| GPIO 18 | LED Data Out | To level shifter input |
| GPIO 21 (SDA) | I2C Data | OLED SDA |
| GPIO 22 (SCL) | I2C Clock | OLED SCL |
| 3V3 | 3.3V Out | OLED VCC, Level shifter LV |

### Level Shifter Wiring (74AHCT125)
| Shifter Pin | Connection |
|-------------|------------|
| VCC | 5V from distribution |
| GND | Common ground |
| 1A (Input) | ESP32 GPIO 18 (3.3V signal) |
| 1Y (Output) | First cup Data In (5V signal) |
| 1OE | Tied to GND (always enabled) |

### Recommended Extras
- **Resistor:** 330-470Î© on data line between level shifter and first LED
- **Capacitor:** 1000ÂµF (6.3V+) across 5V/GND at first power injection point

---

## Communication Protocol

### Socket Connection
- **Protocol:** TCP Socket
- **Port:** 5005
- **Pi5 Role:** Client (sends commands)
- **Pico Role:** Server (listens, receives, executes)

### Command Format
```
COMMAND:ACTION:VALUE
```

### Command Reference
| Command | Description |
|---------|-------------|
| `PING` | Connection test, Pico responds `PONG` |
| `LED:ALL_ON` | All LEDs white |
| `LED:ALL_OFF` | All LEDs off |
| `LED:BRIGHTNESS:XX` | Set brightness 0-100 |
| `LED:COLOR:RRGGBB` | Set all LEDs to hex color |
| `LED:CUP:N:RRGGBB` | Set cup N (1-20) to hex color |
| `ANIM:IDLE` | Ambient DDM color breathing |
| `ANIM:WELCOME` | Welcome show |
| `ANIM:BETTING_60` | 60-minute warning |
| `ANIM:BETTING_30` | 30-minute warning |
| `ANIM:FINAL_CALL` | Final call strobe |
| `ANIM:RACE_START` | Green flash, race begins |
| `ANIM:CHAOS` | Maximum intensity final stretch |
| `ANIM:FINISH` | Checkered flag sequence |
| `ANIM:HEARTBEAT` | Synchronized pulse (slows over time) |
| `RESULTS:W:X:P:Y:S:Z` | Set winners (cup numbers for Win/Place/Show) |
| `RESET` | Clear all, return to idle |

---

## Animation Sequences

### Pre-Race
| Animation | Behavior |
|-----------|----------|
| Welcome | Cascading DDM colors across all cups |
| System Test | Sequential cup-by-cup color test |
| Idle/Standby | Slow breathing in DDM green |

### Betting Period
| Animation | Behavior |
|-----------|----------|
| 60 Min Warning | Gentle gold pulse |
| 30 Min Warning | Faster amber pulse |
| Final Call | Red strobe, increasing urgency |

### During Race
| Phase | Behavior | Duration |
|-------|----------|----------|
| Race Start | All cups flash green | 0.5s |
| Early Race | Colored movement per cup | 5-30s |
| Mid Race | Building intensity | 30-90s |
| Final Stretch | Chaos building on leaders | 90-115s |
| Chaos Mode | Max strobing | 115-120s |
| Finish | Black â†’ checkered pattern | 5s |

### Results (AFTER-RACE)
| Position | Animation |
|----------|-----------|
| Win (Gold) | Slow 2s gold breathing pulse |
| Place (Silver) | Slow 2s silver breathing pulse |
| Show (Bronze) | Slow 2s bronze breathing pulse |
| Other 17 Cups | Dim dark red (~10% brightness) |

All cups maintain synchronized heartbeat while displaying their colors.

---

## DDM Color Palette

```python
DDM_COLORS = {
    "green":  (34, 139, 34),    # #228B22 - Derby forest green
    "gold":   (255, 215, 0),    # #FFD700 - Golden yellow
    "rose":   (220, 20, 60),    # #DC143C - Deep rose/red
    "white":  (255, 255, 255),  # #FFFFFF - Clean white
    "black":  (0, 0, 0),        # #000000 - Off
    "silver": (192, 192, 192),  # #C0C0C0 - Place
    "bronze": (205, 127, 50),   # #CD7F32 - Show
}
```

---

## Pi5 Dashboard Interface

### Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‡ DERBY DE MAYO CONTROL CENTER ğŸ‡           â”‚ 15:47:23 EDT â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“¶ WiFi: Connected    ğŸ”Œ ESP32: ONLINE â”‚  âš¡ ~20A / 60A            â”‚
â”‚  ğŸŒ¡ï¸ CPU: 48Â°C          ğŸ’¾ MEM: 1.1GB    â”‚  ğŸ’¡ 640 LEDs Active       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  PRE-RACE   â”‚  â”‚   BETTING   â”‚  â”‚ DURING RACE â”‚  â”‚  RESULTS  â”‚ â”‚
â”‚   â”‚             â”‚  â”‚    OPEN     â”‚  â”‚             â”‚  â”‚           â”‚ â”‚
â”‚   â”‚ [Welcome]   â”‚  â”‚ [60 Min]    â”‚  â”‚ [THEY'RE    â”‚  â”‚ [Winner]  â”‚ â”‚
â”‚   â”‚ [Test]      â”‚  â”‚ [30 Min]    â”‚  â”‚   OFF!]     â”‚  â”‚ [Place]   â”‚ â”‚
â”‚   â”‚ [Standby]   â”‚  â”‚ [FINAL      â”‚  â”‚ [CHAOS]     â”‚  â”‚ [Show]    â”‚ â”‚
â”‚   â”‚             â”‚  â”‚   CALL]     â”‚  â”‚ [FINISH]    â”‚  â”‚ [Reset]   â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ›‘ [EMERGENCY STOP]      â”‚ MODE: STANDBY â”‚ v3.0.0 â”‚ ESP32: OK     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Results Panel Workflow
1. Tap "Winner" â†’ Cup selection grid (1-20) appears
2. Select cup number for Win position
3. Repeat for Place and Show
4. Tap "APPLY RESULTS" to send command
5. Cannot select same cup for multiple positions

---

## OLED Display (on ESP32)

Shows real-time status:
- **Line 1:** IP Address
- **Line 2:** Connection status (Connected/Waiting)
- **Line 3:** Current animation name
- **Line 4:** Last command received

---

## Enclosure Concept

The ESP32, level shifter, and fuse board mount on/around the Mean Well PSU:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           OLED Display Window              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ESP32       â”‚    Level Shifter          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        6-Channel Fused Distribution        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚       Mean Well LRS-350-5 PSU (Base)       â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚    â”‚    â”‚    â”‚    â”‚    â”‚
   Power drops to cup groups (JST-VH)
```

- 3D printed enclosure clips to PSU housing
- Cutouts for: OLED window, USB (ESP32 programming), power output connectors
- Ventilation for PSU airflow

---

## Project File Structure

```
ddm_cup_v3/
â”œâ”€â”€ README.md                    # This document
â”‚
â”œâ”€â”€ pi5/                         # Raspberry Pi 5 code
â”‚   â”œâ”€â”€ requirements.txt         # Python dependencies
â”‚   â”œâ”€â”€ main.py                  # Flask app entry point
â”‚   â”œâ”€â”€ config.py                # Settings (IP, port, colors)
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ dashboard.html       # Main control interface
â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â””â”€â”€ ddm_style.css    # DDM-branded styles
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â””â”€â”€ ddm_control.js   # Button handlers, socket client
â”‚   â””â”€â”€ communication/
â”‚       â””â”€â”€ esp32_client.py      # Socket client to send commands
â”‚
â”œâ”€â”€ esp32/                       # ESP32 code (Arduino/C++)
â”‚   â”œâ”€â”€ ddm_led_controller/
â”‚   â”‚   â”œâ”€â”€ ddm_led_controller.ino  # Main Arduino sketch
â”‚   â”‚   â”œâ”€â”€ config.h             # WiFi creds, LED count, pins
â”‚   â”‚   â”œâ”€â”€ led_control.h        # LED strip control functions
â”‚   â”‚   â”œâ”€â”€ led_control.cpp
â”‚   â”‚   â”œâ”€â”€ animations.h         # Animation functions
â”‚   â”‚   â”œâ”€â”€ animations.cpp
â”‚   â”‚   â”œâ”€â”€ oled_display.h       # OLED status updates
â”‚   â”‚   â””â”€â”€ oled_display.cpp
â”‚
â”œâ”€â”€ hardware/                    # Reference files
â”‚   â”œâ”€â”€ wiring_diagram.png       # Visual wiring reference
â”‚   â”œâ”€â”€ pinout.md                # ESP32 pinout details
â”‚   â””â”€â”€ parts_list.md            # BOM with links
â”‚
â””â”€â”€ 3d_models/                   # STL files for printing
    â”œâ”€â”€ cup_base.stl             # Cup base with LED groove
    â”œâ”€â”€ controller_enclosure.stl # ESP32/shifter/fuse housing
    â””â”€â”€ cable_shroud.stl         # T-junction covers
```

---

## Parts List (BOM)

| Part | Qty | Notes |
|------|-----|-------|
| Raspberry Pi 5 (2GB) | 1 | Master controller |
| 10" Touchscreen | 1 | Compatible with Pi5 |
| ESP32 WROOM-32 DevKit V1 | 1 | LED controller |
| WS2812B Strip (144 LED/m) | ~5m | Cut into 20 Ã— 32-LED segments |
| Mean Well LRS-350-5 (5V 60A) | 1 | Power supply with headroom |
| 6-Channel Fused DC Dist Board | 1 | Power distribution |
| 74AHCT125 Level Shifter | 1 | 3.3V â†’ 5V (recommended) |
| 0.96" I2C OLED (SSD1306) | 1 | Status display |
| JST-SM 2-pin connectors | 40+ | Data jumpers (male+female) |
| JST-VH 2-pin connectors | 25+ | Power connections |
| 14-16 AWG wire (red/black) | 20ft | Power trunk |
| 22 AWG wire (various) | 30ft | Data lines, jumpers |
| 330Î© resistor | 1 | Data line protection |
| 1000ÂµF capacitor (6.3V+) | 3 | Inrush buffer at injection points |
| Heat shrink tubing | Assorted | Joint protection |
| 3D printer filament | ~500g | Bases + enclosure |

---

## Development Phases

### Phase 1: Foundation
- [ ] Set up Pi5 with Flask
- [ ] Set up ESP32 with Arduino IDE + FastLED
- [ ] Establish socket communication (PING/PONG)
- [ ] Basic LED control (on/off/color)

### Phase 2: Core Features
- [ ] Build dashboard HTML/CSS/JS
- [ ] Implement all animations on ESP32
- [ ] Wire up OLED display
- [ ] Test command protocol end-to-end

### Phase 3: Hardware Build
- [ ] 3D print cup bases
- [ ] Cut and solder LED strip segments
- [ ] Build power distribution harness
- [ ] Build data jumper cables
- [ ] Assemble controller enclosure

### Phase 4: Integration
- [ ] Mount all 20 cup bases
- [ ] Connect power and data chains
- [ ] Full system test
- [ ] Fine-tune animations and timing

### Phase 5: Polish
- [ ] Add error handling and reconnection logic
- [ ] Finalize UI styling
- [ ] Create setup/teardown documentation
- [ ] Party time! ğŸ‡ğŸ‰

---

## Quick Reference

| Spec | Value |
|------|-------|
| Total LEDs | 640 (32 Ã— 20) |
| LED Type | WS2812B strip segments (144/m) |
| Controller | ESP32 WROOM-32 |
| Master | Pi5 + 10" touch |
| Communication | WiFi socket (port 5005) |
| Power | 5V 60A PSU + fused distribution |
| Injection Points | 3 (start, middle, end) |
| Data | Single chain, level-shifted, GPIO 18 |

---

*Document Version: 3.0*  
*Last Updated: December 2024*  
*Ready for VSCode + Cline build-out*