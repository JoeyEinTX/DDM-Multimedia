<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DDM Racing System{% endblock %}</title>
    
    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/ddm_style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/responsive.css') }}" rel="stylesheet">
    
    <!-- Page-specific CSS -->
    {% block extra_css %}{% endblock %}
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèá</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="DDM Racing">
    
    <!-- Open Graph -->
    <meta property="og:title" content="{% block og_title %}DDM Racing System{% endblock %}">
    <meta property="og:description" content="{% block og_description %}Voice-Activated LED Racing Control System{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:image" content="{{ url_for('static', filename='images/og-image.jpg', _external=True) }}">
    
    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "DDM Racing System",
        "description": "Voice-Activated LED Racing Control System",
        "url": "{{ request.url_root }}",
        "applicationCategory": "Entertainment",
        "operatingSystem": "Web Browser"
    }
    </script>
</head>
<body class="{% block body_class %}{% endblock %}">
    <!-- Skip to main content for screen readers -->
    <a href="#main-content" class="sr-only sr-only-focusable">Skip to main content</a>
    
    <!-- Background Animation Mirror -->
    <div class="bg-animation" id="bg-animation" aria-hidden="true"></div>
    
    <!-- Header -->
    {% block header %}
        {% include 'shared/header.html' %}
    {% endblock %}
    
    <!-- Main Content -->
    <main id="main-content" class="main-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    {% block footer %}
        {% include 'shared/footer.html' %}
    {% endblock %}
    
    <!-- Modals -->
    {% block modals %}{% endblock %}
    
    <!-- Accessibility Controls -->
    <div class="accessibility-controls" role="toolbar" aria-label="Accessibility Controls">
        <!-- Theme Toggle -->
        <button class="theme-toggle" type="button" aria-label="Toggle theme" title="Toggle between light and dark theme">
            <span class="sr-only">Toggle theme</span>
            üåô
        </button>
        
        <!-- High Contrast Toggle -->
        <button class="contrast-toggle" type="button" aria-label="Toggle high contrast" title="Toggle high contrast mode">
            <span class="sr-only">Toggle high contrast</span>
            ‚ö°
        </button>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" aria-hidden="true">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div class="notification-container" id="notification-container" aria-live="polite"></div>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/responsive.js') }}"></script>
    
    <!-- Page-specific JS -->
    {% block extra_js %}{% endblock %}
    
    <!-- Analytics (if needed) -->
    {% block analytics %}{% endblock %}
</body>
</html>
